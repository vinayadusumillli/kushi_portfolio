{% extends 'main/base.html' %}
{% load static %}

{% block title %}Blog - Khushi Deshmukh{% endblock %}

{% block content %}
<section>
    <div class="section-title">
        <h2>Blog</h2>
        <p>Insights & Stories</p>
    </div>
    
    {% if blogs %}
        <div class="blog-grid">
            {% for blog in blogs %}
                <a href="{% url 'blog_detail' blog.slug %}" class="blog-card fade-in">
                    <div class="blog-image-container">
                        {% if blog.image %}
                            <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="blog-image">
                        {% else %}
                            <img src="{% static 'images/uploaded_image_4_1764710806801.png' %}" alt="{{ blog.title }}" class="blog-image">
                        {% endif %}
                    </div>
                    <div class="blog-content">
                        <span class="blog-date">{{ blog.created_at|date:"F d, Y" }}</span>
                        <h3>{{ blog.title }}</h3>
                        <p style="color: var(--gray-text);">{{ blog.excerpt|default:blog.content|truncatewords:20 }}</p>
                        <span class="read-more">Read Article</span>
                    </div>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <div style="text-align: center; padding: 4rem 0;">
            <h3>No Blog Posts Yet</h3>
            <p>Check back soon for insights and stories.</p>
            <a href="{% url 'home' %}" class="btn btn-secondary" style="margin-top: 2rem;">Back to Home</a>
        </div>
    {% endif %}
</section>

<script>
    // Fade in animation
    const observer = new IntersectionObserver(function(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-in').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
        observer.observe(el);
    });
</script>
{% endblock %}
